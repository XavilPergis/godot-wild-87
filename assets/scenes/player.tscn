[gd_scene load_steps=30 format=3 uid="uid://c6dxdh2j650h2"]

[ext_resource type="Script" uid="uid://j7ivnt71yxbe" path="res://assets/scripts/basic_gameplay/basic_player.gd" id="1_s027a"]
[ext_resource type="Script" uid="uid://gi1wna232m0o" path="res://assets/scripts/components/HealthComponent.gd" id="2_14505"]
[ext_resource type="Texture2D" uid="uid://petge3m2ak3h" path="res://assets/sprites/DoomMarine.png" id="3_4wcc8"]
[ext_resource type="Script" uid="uid://ck0vjtfvp7vih" path="res://assets/scripts/billboard_sprite_rotator.gd" id="4_8sknh"]

[sub_resource type="BoxShape3D" id="BoxShape3D_cmmd3"]
size = Vector3(1, 2, 1)

[sub_resource type="BoxShape3D" id="BoxShape3D_fj761"]
size = Vector3(1, 0.90000004, 1)

[sub_resource type="BoxShape3D" id="BoxShape3D_d428f"]
size = Vector3(0.95, 0.25, 0.95)

[sub_resource type="BoxMesh" id="BoxMesh_4wcc8"]
size = Vector3(0.1, 0.1, 1)

[sub_resource type="AtlasTexture" id="AtlasTexture_0gfpk"]
atlas = ExtResource("3_4wcc8")
region = Rect2(0, 240, 58, 60)

[sub_resource type="AtlasTexture" id="AtlasTexture_0hrit"]
atlas = ExtResource("3_4wcc8")
region = Rect2(58, 240, 58, 60)

[sub_resource type="AtlasTexture" id="AtlasTexture_o5c66"]
atlas = ExtResource("3_4wcc8")
region = Rect2(116, 240, 58, 60)

[sub_resource type="AtlasTexture" id="AtlasTexture_tc801"]
atlas = ExtResource("3_4wcc8")
region = Rect2(174, 240, 58, 60)

[sub_resource type="AtlasTexture" id="AtlasTexture_60g6h"]
atlas = ExtResource("3_4wcc8")
region = Rect2(0, 180, 58, 60)

[sub_resource type="AtlasTexture" id="AtlasTexture_hrrj1"]
atlas = ExtResource("3_4wcc8")
region = Rect2(58, 180, 58, 60)

[sub_resource type="AtlasTexture" id="AtlasTexture_c6vv5"]
atlas = ExtResource("3_4wcc8")
region = Rect2(116, 180, 58, 60)

[sub_resource type="AtlasTexture" id="AtlasTexture_nh07x"]
atlas = ExtResource("3_4wcc8")
region = Rect2(174, 180, 58, 60)

[sub_resource type="AtlasTexture" id="AtlasTexture_00pic"]
atlas = ExtResource("3_4wcc8")
region = Rect2(0, 0, 58, 60)

[sub_resource type="AtlasTexture" id="AtlasTexture_0bskb"]
atlas = ExtResource("3_4wcc8")
region = Rect2(58, 0, 58, 60)

[sub_resource type="AtlasTexture" id="AtlasTexture_1dmvh"]
atlas = ExtResource("3_4wcc8")
region = Rect2(116, 0, 58, 60)

[sub_resource type="AtlasTexture" id="AtlasTexture_ratp2"]
atlas = ExtResource("3_4wcc8")
region = Rect2(174, 0, 58, 60)

[sub_resource type="AtlasTexture" id="AtlasTexture_84enu"]
atlas = ExtResource("3_4wcc8")
region = Rect2(0, 60, 58, 60)

[sub_resource type="AtlasTexture" id="AtlasTexture_cd4ww"]
atlas = ExtResource("3_4wcc8")
region = Rect2(58, 60, 58, 60)

[sub_resource type="AtlasTexture" id="AtlasTexture_rqyl7"]
atlas = ExtResource("3_4wcc8")
region = Rect2(116, 60, 58, 60)

[sub_resource type="AtlasTexture" id="AtlasTexture_wf17w"]
atlas = ExtResource("3_4wcc8")
region = Rect2(174, 60, 58, 60)

[sub_resource type="AtlasTexture" id="AtlasTexture_msj1n"]
atlas = ExtResource("3_4wcc8")
region = Rect2(0, 120, 58, 60)

[sub_resource type="AtlasTexture" id="AtlasTexture_ktpxd"]
atlas = ExtResource("3_4wcc8")
region = Rect2(58, 120, 58, 60)

[sub_resource type="AtlasTexture" id="AtlasTexture_dvip7"]
atlas = ExtResource("3_4wcc8")
region = Rect2(116, 120, 58, 60)

[sub_resource type="AtlasTexture" id="AtlasTexture_beuf1"]
atlas = ExtResource("3_4wcc8")
region = Rect2(174, 120, 58, 60)

[sub_resource type="SpriteFrames" id="SpriteFrames_0e2pd"]
animations = [{
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_0gfpk")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_0hrit")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_o5c66")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_tc801")
}],
"loop": true,
"name": &"walk_N",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_60g6h")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_hrrj1")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_c6vv5")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_nh07x")
}],
"loop": true,
"name": &"walk_NW",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_00pic")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_0bskb")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_1dmvh")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_ratp2")
}],
"loop": true,
"name": &"walk_S",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_84enu")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_cd4ww")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_rqyl7")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_wf17w")
}],
"loop": true,
"name": &"walk_SW",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_msj1n")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_ktpxd")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_dvip7")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_beuf1")
}],
"loop": true,
"name": &"walk_W",
"speed": 5.0
}]

[node name="Player" type="CharacterBody3D"]
collision_layer = 5
script = ExtResource("1_s027a")
speed = 6.0

[node name="HealthComponent" type="Node" parent="."]
script = ExtResource("2_14505")
metadata/_custom_type_script = "uid://gi1wna232m0o"

[node name="StandingShape" type="CollisionShape3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1, 0)
shape = SubResource("BoxShape3D_cmmd3")

[node name="CrawlingShape" type="CollisionShape3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.45000008, 0)
shape = SubResource("BoxShape3D_fj761")

[node name="StandingAllowedCast" type="ShapeCast3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.5, 0)
shape = SubResource("BoxShape3D_d428f")
target_position = Vector3(0, 1.5, 0)
max_results = 1
debug_shape_custom_color = Color(0.083333254, 1, 0, 0.4509804)

[node name="MeshInstance3D" type="MeshInstance3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.6857779, -0.5169332)
mesh = SubResource("BoxMesh_4wcc8")

[node name="AnimatedSprite3D" type="AnimatedSprite3D" parent="."]
transform = Transform3D(-1, 0, 8.742278e-08, 0, 1, 0, -8.742278e-08, 0, -1, 0, 1.2, 0)
pixel_size = 0.04
billboard = 1
texture_filter = 0
sprite_frames = SubResource("SpriteFrames_0e2pd")
animation = &"walk_S"

[node name="BillboardSpriteRotator" type="Node" parent="AnimatedSprite3D" node_paths=PackedStringArray("sprite")]
script = ExtResource("4_8sknh")
sprite = NodePath("..")
initial_animation = "walk"
metadata/_custom_type_script = "uid://ck0vjtfvp7vih"

[node name="FirstPersonAnchor" type="Marker3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.5, 0)

[node name="LookAroundWallAnchor" type="Marker3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.5, 0)

[node name="Eyes" type="Marker3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.5, 0)

[node name="RightVisibility" type="RayCast3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 2, 1.7, 0)
target_position = Vector3(0, 0, -1)

[node name="LeftVisibility" type="RayCast3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -2, 1.7, 0)
target_position = Vector3(0, 0, -1)

[connection signal="died" from="HealthComponent" to="." method="_on_health_component_died"]
[connection signal="took_damage" from="HealthComponent" to="." method="_on_health_component_took_damage"]
